{"version":3,"file":"ionic-image-loader.umd.js.map","sources":["ng://ionic-image-loader/lib/services/image-loader-config.service.ts","node_modules/tslib/tslib.es6.js","ng://ionic-image-loader/lib/services/image-loader.service.ts","ng://ionic-image-loader/lib/ionic-image-loader.component.ts","ng://ionic-image-loader/lib/ionic-image-loader.module.ts"],"sourcesContent":["import { HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ImageLoaderConfigService {\n  debugMode = false;\n\n  spinnerEnabled = true;\n\n  fallbackAsPlaceholder = false;\n\n  backgroundSize = 'contain';\n\n  backgroundRepeat = 'no-repeat';\n\n  display = 'block';\n\n  width = '100%';\n\n  height = '100%';\n\n  useImg = false;\n\n  fallbackUrl;\n\n  concurrency = 5;\n\n  maxCacheSize = -1;\n\n  maxCacheAge = -1;\n\n  imageReturnType: 'base64' | 'uri' = 'uri';\n\n  spinnerName;\n\n  spinnerColor;\n\n  httpHeaders: HttpHeaders;\n\n  // Must be default 'true' for the new WebView to show images\n  fileNameCachedWithExtension = true;\n\n  fallbackFileNameCachedExtension = '.jpg';\n\n  cacheDirectoryType: 'cache' | 'data' | 'external' = 'cache';\n\n  private _cacheDirectoryName = 'image-loader-cache';\n\n\n  get cacheDirectoryName() {\n    return this._cacheDirectoryName;\n  }\n\n  set cacheDirectoryName(name) {\n    name.replace(/\\W/g, '');\n    this._cacheDirectoryName = name;\n  }\n\n  /**\n   * Enables debug mode to receive console logs, errors, warnings\n   */\n  enableDebugMode() {\n    this.debugMode = true;\n  }\n\n  /**\n   * Enable/Disable the spinner by default. Defaults to true.\n   * @param enable set to true to enable\n   */\n  enableSpinner(enable: boolean) {\n    this.spinnerEnabled = enable;\n  }\n\n  /**\n   * Enable/Disable the fallback image as placeholder instead of the spinner. Defaults to false.\n   * @param enable set to true to enable\n   */\n  enableFallbackAsPlaceholder(enable: boolean) {\n    this.fallbackAsPlaceholder = enable;\n  }\n\n  /**\n   * Sets the cache directory name. Defaults to 'image-loader-cache'\n   * @param name name of directory\n   */\n  setCacheDirectoryName(name: string) {\n    this.cacheDirectoryName = name;\n  }\n\n  /**\n   * Set default height for images that are not using <img> tag\n   * @param height height\n   */\n  setHeight(height: string) {\n    this.height = height;\n  }\n\n  /**\n   * Set default width for images that are not using <img> tag\n   * @param width Width\n   */\n  setWidth(width: string) {\n    this.width = width;\n  }\n\n  /**\n   * Enable display mode for images that are not using <img> tag\n   * @param display Display mode\n   */\n  setDisplay(display: string) {\n    this.display = display;\n  }\n\n  /**\n   * Use <img> tag by default\n   * @param use set to true to use <img> tag by default\n   */\n  useImageTag(use: boolean) {\n    this.useImg = use;\n  }\n\n  /**\n   * Set default background size for images that are not using <img> tag\n   * @param backgroundSize Background size\n   */\n  setBackgroundSize(backgroundSize: string) {\n    this.backgroundSize = backgroundSize;\n  }\n\n  /**\n   * Set background repeat for images that are not using <img> tag\n   * @param backgroundRepeat Background repeat\n   */\n  setBackgroundRepeat(backgroundRepeat: string) {\n    this.backgroundRepeat = backgroundRepeat;\n  }\n\n  /**\n   * Set fallback URL to use when image src is undefined or did not resolve.\n   * This image will not be cached. This should ideally be a locally saved image.\n   * @param fallbackUrl The remote or local URL of the image\n   */\n  setFallbackUrl(fallbackUrl: string) {\n    this.fallbackUrl = fallbackUrl;\n  }\n\n  /**\n   * Set the maximum number of allowed connections at the same time.\n   * @param concurrency\n   */\n  setConcurrency(concurrency: number) {\n    this.concurrency = concurrency;\n  }\n\n  /**\n   * Sets the maximum allowed cache size\n   * @param cacheSize Cache size in bytes\n   */\n  setMaximumCacheSize(cacheSize: number) {\n    this.maxCacheSize = cacheSize;\n  }\n\n  /**\n   * Sets the maximum allowed cache age\n   * @param cacheAge Maximum cache age in milliseconds\n   */\n  setMaximumCacheAge(cacheAge: number) {\n    this.maxCacheAge = cacheAge;\n  }\n\n  /**\n   * Set the return type of cached images\n   * @param imageReturnType The return type; either 'base64' or 'uri'\n   */\n  setImageReturnType(imageReturnType: 'base64' | 'uri') {\n    this.imageReturnType = imageReturnType;\n  }\n\n  /**\n   * Set the default spinner name\n   * @param name\n   */\n  setSpinnerName(name: string) {\n    this.spinnerName = name;\n  }\n\n  /**\n   * Set the default spinner color\n   * @param color\n   */\n  setSpinnerColor(color: string) {\n    this.spinnerColor = color;\n  }\n\n  /**\n   * Set headers options for the HttpClient transfers.\n   * @param headers\n   */\n  setHttpHeaders(headers: HttpHeaders) {\n    this.httpHeaders = headers;\n  }\n\n  /**\n   * Set options for the FileTransfer plugin\n   * @param options\n   * @deprecated FileTransfer plugin removed.\n   */\n  setFileTransferOptions(options: {\n    trustAllHosts: boolean;\n    [key: string]: any;\n  }) {\n    // do nothing, plugin deprecated.\n  }\n\n  /**\n   * Enable/Disable the save filename of cached images with extension.  Defaults to false.\n   * @param enable set to true to enable\n   */\n  setFileNameCachedWithExtension(enable: boolean) {\n    this.fileNameCachedWithExtension = enable;\n  }\n\n  /**\n   * Set fallback extension filename of cached images.  Defaults to '.jpg'.\n   * @param extension fallback extension (e.x .jpg)\n   */\n  setFallbackFileNameCachedExtension(extension: string) {\n    this.fallbackFileNameCachedExtension = extension;\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { File, FileEntry } from '@ionic-native/file/ngx';\nimport { WebView } from '@ionic-native/ionic-webview/ngx';\nimport { Platform } from '@ionic/angular';\nimport { fromEvent, Subject } from 'rxjs';\nimport { filter, first, take } from 'rxjs/operators';\nimport { ImageLoaderConfigService } from './image-loader-config.service';\n\ninterface IndexItem {\n  name: string;\n  modificationTime: Date;\n  size: number;\n}\n\ninterface QueueItem {\n  imageUrl: string;\n  resolve: Function;\n  reject: Function;\n}\n\ndeclare const Ionic: any;\n\nconst EXTENSIONS = ['jpg', 'png', 'jpeg', 'gif', 'svg', 'tiff'];\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ImageLoaderService {\n\n  /**\n   * Indicates if the cache service is ready.\n   * When the cache service isn't ready, images are loaded via browser instead.\n   */\n  private isCacheReady = false;\n  /**\n   * Indicates if this service is initialized.\n   * This service is initialized once all the setup is done.\n   */\n  private isInit = false;\n  private initPromiseResolve: Function;\n  private initPromise = new Promise<void>(resolve => this.initPromiseResolve = resolve);\n  private lockSubject = new Subject<boolean>();\n  private lock$ = this.lockSubject.asObservable();\n  /**\n   * Number of concurrent requests allowed\n   */\n  private concurrency = 5;\n  /**\n   * Queue items\n   */\n  private queue: QueueItem[] = [];\n  private processing = 0;\n  /**\n   * Fast accessible Object for currently processing items\n   */\n  private currentlyProcessing: { [index: string]: Promise<any> } = {};\n  private cacheIndex: IndexItem[] = [];\n  private currentCacheSize = 0;\n  private indexed = false;\n  private lockedCallsQueue: Function[] = [];\n\n  constructor(\n    private config: ImageLoaderConfigService,\n    private file: File,\n    private http: HttpClient,\n    private platform: Platform,\n    private webview: WebView,\n  ) {\n    if (!platform.is('cordova')) {\n      // we are running on a browser, or using livereload\n      // plugin will not function in this case\n      this.isInit = true;\n      this.throwWarning(\n        'You are running on a browser or using livereload, IonicImageLoader will not function, falling back to browser loading.',\n      );\n      this.initPromiseResolve();\n    } else {\n      fromEvent(document, 'deviceready')\n        .pipe(first())\n        .subscribe(res => {\n          if (this.nativeAvailable) {\n            this.initCache();\n          } else {\n            // we are running on a browser, or using livereload\n            // plugin will not function in this case\n            this.isInit = true;\n            this.initPromiseResolve();\n            this.throwWarning(\n              'You are running on a browser or using livereload, IonicImageLoader will not function, falling back to browser loading.',\n            );\n          }\n        });\n    }\n  }\n\n  get nativeAvailable(): boolean {\n    return File.installed();\n  }\n\n  private get isCacheSpaceExceeded(): boolean {\n    return (\n      this.config.maxCacheSize > -1 &&\n      this.currentCacheSize > this.config.maxCacheSize\n    );\n  }\n\n  private get isWKWebView(): boolean {\n    return (\n      this.platform.is('ios') &&\n      (<any>window).webkit &&\n      (<any>window).webkit.messageHandlers\n    );\n  }\n\n  private get isIonicWKWebView(): boolean {\n    return (\n      //  Important: isWKWebview && isIonicWKWebview must be mutually excluse.\n      //  Otherwise the logic for copying to tmp under IOS will fail.\n      (this.platform.is('android') && this.webview) ||\n      (this.platform.is('android')) && (location.host === 'localhost:8080') ||\n      (<any>window).LiveReload);\n  }\n\n  private get isDevServer(): boolean {\n    return window['IonicDevServer'] !== undefined;\n  }\n\n  /**\n   * Check if we can process more items in the queue\n   */\n  private get canProcess(): boolean {\n    return this.queue.length > 0 && this.processing < this.concurrency;\n  }\n\n  ready(): Promise<void> {\n    return this.initPromise;\n  }\n\n  /**\n   * Preload an image\n   * @param imageUrl Image URL\n   * @returns returns a promise that resolves with the cached image URL\n   */\n  preload(imageUrl: string): Promise<string> {\n    return this.getImagePath(imageUrl);\n  }\n\n  getFileCacheDirectory() {\n    if (this.config.cacheDirectoryType === 'data') {\n      return this.file.dataDirectory;\n    } else if (this.config.cacheDirectoryType === 'external') {\n      return this.platform.is('android') ? this.file.externalDataDirectory : this.file.documentsDirectory;\n    }\n    return this.file.cacheDirectory;\n  }\n\n  /**\n   * Clears cache of a single image\n   * @param imageUrl Image URL\n   */\n  async clearImageCache(imageUrl: string) {\n    if (!this.platform.is('cordova')) {\n      return;\n    }\n\n    await this.ready();\n\n    this.runLocked(async () => {\n      const fileName = this.createFileName(imageUrl);\n      const route = this.getFileCacheDirectory() + this.config.cacheDirectoryName;\n      // pause any operations\n      this.isInit = false;\n\n      try {\n        await this.file.removeFile(route, fileName);\n\n        if (this.isWKWebView && !this.isIonicWKWebView) {\n          await this.file.removeFile(this.file.tempDirectory + this.config.cacheDirectoryName, fileName);\n        }\n      } catch (err) {\n        this.throwError(err);\n      }\n\n      return this.initCache(true);\n    });\n  }\n\n  /**\n   * Clears the cache\n   */\n  async clearCache() {\n    if (!this.platform.is('cordova')) {\n      return;\n    }\n\n    await this.ready();\n\n    this.runLocked(async () => {\n      try {\n        await this.file.removeRecursively(this.getFileCacheDirectory(), this.config.cacheDirectoryName);\n\n        if (this.isWKWebView && !this.isIonicWKWebView) {\n          // also clear the temp files\n          try {\n            this.file.removeRecursively(this.file.tempDirectory, this.config.cacheDirectoryName);\n          } catch (err) {\n            // Noop catch. Removing the tempDirectory might fail,\n            // as it is not persistent.\n          }\n        }\n      } catch (err) {\n        this.throwError(err);\n      }\n\n      return this.initCache(true);\n    });\n  }\n\n  /**\n   * Gets the filesystem path of an image.\n   * This will return the remote path if anything goes wrong or if the cache service isn't ready yet.\n   * @param imageUrl The remote URL of the image\n   * @returns Returns a promise that will always resolve with an image URL\n   */\n  async getImagePath(imageUrl: string): Promise<string> {\n    if (typeof imageUrl !== 'string' || imageUrl.length <= 0) {\n      throw new Error('The image url provided was empty or invalid.');\n    }\n\n    await this.ready();\n\n    if (!this.isCacheReady) {\n      this.throwWarning('The cache system is not running. Images will be loaded by your browser instead.');\n      return imageUrl;\n    }\n\n    if (this.isImageUrlRelative(imageUrl)) {\n      return imageUrl;\n    }\n\n    try {\n      return await this.getCachedImagePath(imageUrl);\n    } catch (err) {\n      // image doesn't exist in cache, lets fetch it and save it\n      return this.addItemToQueue(imageUrl);\n    }\n  }\n\n  private async processLockedQueue() {\n    if (await this.getLockedState()) {\n      return;\n    }\n\n    if (this.lockedCallsQueue.length > 0) {\n      await this.setLockedState(true);\n\n      try {\n        await this.lockedCallsQueue.slice(0, 1)[0]();\n      } catch (err) {\n        console.log('Error running locked function: ', err);\n      }\n\n      await this.setLockedState(false);\n      return this.processLockedQueue();\n    }\n  }\n\n  private getLockedState(): Promise<boolean> {\n    return this.lock$\n      .pipe(take(1))\n      .toPromise();\n  }\n\n  private awaitUnlocked(): Promise<boolean> {\n    return this.lock$\n      .pipe(\n        filter(locked => !!locked),\n        take(1),\n      )\n      .toPromise();\n  }\n\n  private async setLockedState(locked: boolean) {\n    this.lockSubject.next(locked);\n  }\n\n  private runLocked(fn: Function) {\n    this.lockedCallsQueue.push(fn);\n    this.processLockedQueue();\n  }\n\n  /**\n   * Returns if an imageUrl is an relative path\n   * @param imageUrl\n   */\n  private isImageUrlRelative(imageUrl: string) {\n    return !/^(https?|file):\\/\\/\\/?/i.test(imageUrl);\n  }\n\n  /**\n   * Add an item to the queue\n   * @param imageUrl\n   * @param resolve\n   * @param reject\n   */\n  private addItemToQueue(imageUrl: string, resolve?, reject?): void | Promise<any> {\n    let p: void | Promise<any>;\n\n    if (!resolve && !reject) {\n      p = new Promise<any>((res, rej) => {\n        resolve = res;\n        reject = rej;\n      });\n    } else {\n      resolve = resolve || (() => {\n      });\n      reject = reject || (() => {\n      });\n    }\n\n    this.queue.push({\n      imageUrl,\n      resolve,\n      reject,\n    });\n\n    this.processQueue();\n\n    return p;\n  }\n\n  /**\n   * Processes one item from the queue\n   */\n  private async processQueue() {\n    // make sure we can process items first\n    if (!this.canProcess) {\n      return;\n    }\n\n    // increase the processing number\n    this.processing++;\n\n    // take the first item from queue\n    const currentItem: QueueItem = this.queue.splice(0, 1)[0];\n\n    // function to call when done processing this item\n    // this will reduce the processing number\n    // then will execute this function again to process any remaining items\n    const done = () => {\n      this.processing--;\n      this.processQueue();\n\n      // only delete if it's the last/unique occurrence in the queue\n      if (this.currentlyProcessing[currentItem.imageUrl] !== undefined && !this.currentlyInQueue(currentItem.imageUrl)) {\n        delete this.currentlyProcessing[currentItem.imageUrl];\n      }\n    };\n\n    const error = (e) => {\n      currentItem.reject();\n      this.throwError(e);\n      done();\n    };\n\n    if (this.currentlyProcessing[currentItem.imageUrl] !== undefined) {\n      try {\n        // Prevented same Image from loading at the same time\n        await this.currentlyProcessing[currentItem.imageUrl];\n        const localUrl = await this.getCachedImagePath(currentItem.imageUrl);\n        currentItem.resolve(localUrl);\n        done();\n      } catch (err) {\n        error(err);\n      }\n      return;\n    }\n\n    this.currentlyProcessing[currentItem.imageUrl] = (async () => {\n      // process more items concurrently if we can\n      if (this.canProcess) {\n        this.processQueue();\n      }\n\n      const localDir = this.getFileCacheDirectory() + this.config.cacheDirectoryName + '/';\n      const fileName = this.createFileName(currentItem.imageUrl);\n\n      try {\n        const data: Blob = await this.http.get(currentItem.imageUrl, {\n          responseType: 'blob',\n          headers: this.config.httpHeaders,\n        }).toPromise();\n\n        const file = await this.file.writeFile(localDir, fileName, data, {replace: true}) as FileEntry;\n\n        if (this.isCacheSpaceExceeded) {\n          this.maintainCacheSize();\n        }\n\n        await this.addFileToIndex(file);\n        const localUrl = await this.getCachedImagePath(currentItem.imageUrl);\n        currentItem.resolve(localUrl);\n        done();\n        this.maintainCacheSize();\n      } catch (err) {\n        error(err);\n        throw err;\n      }\n    })();\n\n  }\n\n  /**\n   * Search if the url is currently in the queue\n   * @param imageUrl Image url to search\n   */\n  private currentlyInQueue(imageUrl: string) {\n    return this.queue.some(item => item.imageUrl === imageUrl);\n  }\n\n  /**\n   * Initialize the cache service\n   * @param [replace] Whether to replace the cache directory if it already exists\n   */\n  private async initCache(replace?: boolean) {\n    this.concurrency = this.config.concurrency;\n\n    // create cache directories if they do not exist\n    try {\n      await this.createCacheDirectory(replace);\n      await this.indexCache();\n      this.isCacheReady = true;\n    } catch (err) {\n      this.throwError(err);\n    }\n\n    this.isInit = true;\n    this.initPromiseResolve();\n  }\n\n  /**\n   * Adds a file to index.\n   * Also deletes any files if they are older than the set maximum cache age.\n   * @param file FileEntry to index\n   */\n  private async addFileToIndex(file: FileEntry): Promise<any> {\n    const metadata = await new Promise<any>((resolve, reject) => file.getMetadata(resolve, reject));\n\n    if (\n      this.config.maxCacheAge > -1 &&\n      Date.now() - metadata.modificationTime.getTime() >\n      this.config.maxCacheAge\n    ) {\n      // file age exceeds maximum cache age\n      return this.removeFile(file.name);\n    } else {\n      // file age doesn't exceed maximum cache age, or maximum cache age isn't set\n      this.currentCacheSize += metadata.size;\n\n      // add item to index\n      this.cacheIndex.push({\n        name: file.name,\n        modificationTime: metadata.modificationTime,\n        size: metadata.size,\n      });\n    }\n  }\n\n  /**\n   * Indexes the cache if necessary\n   */\n  private async indexCache(): Promise<void> {\n    this.cacheIndex = [];\n\n    try {\n      const files = await this.file.listDir(this.getFileCacheDirectory(), this.config.cacheDirectoryName);\n      await Promise.all(files.map(this.addFileToIndex.bind(this)));\n      // Sort items by date. Most recent to oldest.\n      this.cacheIndex = this.cacheIndex.sort(\n        (a: IndexItem, b: IndexItem): number => (a > b ? -1 : a < b ? 1 : 0),\n      );\n      this.indexed = true;\n    } catch (err) {\n      this.throwError(err);\n    }\n  }\n\n  /**\n   * This method runs every time a new file is added.\n   * It checks the cache size and ensures that it doesn't exceed the maximum cache size set in the config.\n   * If the limit is reached, it will delete old images to create free space.\n   */\n  private async maintainCacheSize() {\n    if (this.config.maxCacheSize > -1 && this.indexed) {\n      const maintain = async () => {\n        if (this.currentCacheSize > this.config.maxCacheSize) {\n          // grab the first item in index since it's the oldest one\n          const file: IndexItem = this.cacheIndex.splice(0, 1)[0];\n\n          if (typeof file === 'undefined') {\n            return maintain();\n          }\n\n          // delete the file then process next file if necessary\n          try {\n            await this.removeFile(file.name);\n          } catch (err) {\n            // ignore errors, nothing we can do about it\n          }\n\n          this.currentCacheSize -= file.size;\n          return maintain();\n        }\n      };\n\n      return maintain();\n    }\n  }\n\n  /**\n   * Remove a file\n   * @param file The name of the file to remove\n   */\n  private async removeFile(file: string): Promise<any> {\n    await this.file.removeFile(this.getFileCacheDirectory() + this.config.cacheDirectoryName, file);\n\n    if (this.isWKWebView && !this.isIonicWKWebView) {\n      try {\n        return this.file.removeFile(this.file.tempDirectory + this.config.cacheDirectoryName, file);\n      } catch (err) {\n        // Noop catch. Removing the files from tempDirectory might fail, as it is not persistent.\n      }\n    }\n  }\n\n  /**\n   * Get the local path of a previously cached image if exists\n   * @param url The remote URL of the image\n   * @returns Returns a promise that resolves with the local path if exists, or rejects if doesn't exist\n   */\n  private async getCachedImagePath(url: string): Promise<string> {\n    await this.ready();\n\n    if (!this.isCacheReady) {\n      throw new Error('Cache is not ready');\n    }\n\n    // if we're running with livereload, ignore cache and call the resource from it's URL\n    if (this.isDevServer) {\n      return url;\n    }\n\n    // get file name\n    const fileName = this.createFileName(url);\n\n    // get full path\n    const dirPath = this.getFileCacheDirectory() + this.config.cacheDirectoryName,\n      tempDirPath = this.file.tempDirectory + this.config.cacheDirectoryName;\n\n    try {\n      // check if exists\n      const fileEntry = await this.file.resolveLocalFilesystemUrl(dirPath + '/' + fileName) as FileEntry;\n\n      // file exists in cache\n      if (this.config.imageReturnType === 'base64') {\n        // read the file as data url and return the base64 string.\n        // should always be successful as the existence of the file\n        // is already ensured\n        const base64: string = await this.file.readAsDataURL(dirPath, fileName);\n        return base64.replace('data:null', 'data:*/*');\n      } else if (this.config.imageReturnType !== 'uri') {\n        return;\n      }\n\n      // now check if iOS device & using WKWebView Engine.\n      // in this case only the tempDirectory is accessible,\n      // therefore the file needs to be copied into that directory first!\n      if (this.isIonicWKWebView) {\n        return this.normalizeUrl(fileEntry);\n      }\n\n      if (!this.isWKWebView) {\n        // return native path\n        return fileEntry.nativeURL;\n      }\n\n      // check if file already exists in temp directory\n      try {\n        const tempFileEntry = await this.file.resolveLocalFilesystemUrl(tempDirPath + '/' + fileName) as FileEntry;\n        // file exists in temp directory\n        // return native path\n        return this.normalizeUrl(tempFileEntry);\n      } catch (err) {\n        // file does not yet exist in the temp directory.\n        // copy it!\n        const tempFileEntry = await this.file\n          .copyFile(dirPath, fileName, tempDirPath, fileName) as FileEntry;\n\n        // now the file exists in the temp directory\n        // return native path\n        return this.normalizeUrl(tempFileEntry);\n      }\n    } catch (err) {\n      throw new Error('File does not exist');\n    }\n  }\n\n  /**\n   * Normalizes the image uri to a version that can be loaded in the webview\n   * @param fileEntry the FileEntry of the image file\n   * @returns the normalized Url\n   */\n\n  private normalizeUrl(fileEntry: FileEntry): string {\n    // Use Ionic normalizeUrl to generate the right URL for Ionic WKWebView\n    if (Ionic && typeof Ionic.normalizeURL === 'function') {\n      return Ionic.normalizeURL(fileEntry.nativeURL);\n    }\n    // use new webview function to do the trick\n    if (this.webview) {\n      return this.webview.convertFileSrc(fileEntry.nativeURL);\n    }\n    return fileEntry.nativeURL;\n  }\n\n  /**\n   * Throws a console error if debug mode is enabled\n   * @param args Error message\n   */\n  private throwError(...args: any[]) {\n    if (this.config.debugMode) {\n      args.unshift('ImageLoader Error: ');\n      console.error.apply(console, args);\n    }\n  }\n\n  /**\n   * Throws a console warning if debug mode is enabled\n   * @param args Error message\n   */\n  private throwWarning(...args: any[]) {\n    if (this.config.debugMode) {\n      args.unshift('ImageLoader Warning: ');\n      console.warn.apply(console, args);\n    }\n  }\n\n  /**\n   * Check if the cache directory exists\n   * @param directory The directory to check. Either this.file.tempDirectory or this.getFileCacheDirectory()\n   * @returns Returns a promise that resolves if exists, and rejects if it doesn't\n   */\n  private cacheDirectoryExists(directory: string): Promise<boolean> {\n    return this.file.checkDir(directory, this.config.cacheDirectoryName);\n  }\n\n  /**\n   * Create the cache directories\n   * @param replace override directory if exists\n   * @returns Returns a promise that resolves if the directories were created, and rejects on error\n   */\n  private createCacheDirectory(replace: boolean = false): Promise<any> {\n    let cacheDirectoryPromise: Promise<any>, tempDirectoryPromise: Promise<any>;\n\n    if (replace) {\n      // create or replace the cache directory\n      cacheDirectoryPromise = this.file.createDir(this.getFileCacheDirectory(), this.config.cacheDirectoryName, replace);\n    } else {\n      // check if the cache directory exists.\n      // if it does not exist create it!\n      cacheDirectoryPromise = this.cacheDirectoryExists(this.getFileCacheDirectory())\n        .catch(() => this.file.createDir(this.getFileCacheDirectory(), this.config.cacheDirectoryName, false));\n    }\n\n    if (this.isWKWebView && !this.isIonicWKWebView) {\n      if (replace) {\n        // create or replace the temp directory\n        tempDirectoryPromise = this.file.createDir(\n          this.file.tempDirectory,\n          this.config.cacheDirectoryName,\n          replace,\n        );\n      } else {\n        // check if the temp directory exists.\n        // if it does not exist create it!\n        tempDirectoryPromise = this.cacheDirectoryExists(\n          this.file.tempDirectory,\n        ).catch(() =>\n          this.file.createDir(\n            this.file.tempDirectory,\n            this.config.cacheDirectoryName,\n            false,\n          ),\n        );\n      }\n    } else {\n      tempDirectoryPromise = Promise.resolve();\n    }\n\n    return Promise.all([cacheDirectoryPromise, tempDirectoryPromise]);\n  }\n\n  /**\n   * Creates a unique file name out of the URL\n   * @param url URL of the file\n   * @returns Unique file name\n   */\n  private createFileName(url: string): string {\n    // hash the url to get a unique file name\n    return (\n      this.hashString(url).toString() +\n      (this.config.fileNameCachedWithExtension\n        ? this.getExtensionFromUrl(url)\n        : '')\n    );\n  }\n\n  /**\n   * Converts a string to a unique 32-bit int\n   * @param string string to hash\n   * @returns 32-bit int\n   */\n  private hashString(string: string): number {\n    let hash = 0,\n      char;\n    if (string.length === 0) {\n      return hash;\n    }\n    for (let i = 0; i < string.length; i++) {\n      char = string.charCodeAt(i);\n      // tslint:disable-next-line\n      hash = (hash << 5) - hash + char;\n      // tslint:disable-next-line\n      hash = hash & hash;\n    }\n    return hash;\n  }\n\n  /**\n   * Extract extension from filename or url\n   *\n   * @param url\n   * @returns\n   *\n   * Not always will url's contain a valid image extention. We'll check if any valid extention is supplied.\n   * If not, we will use the default.\n   */\n  private getExtensionFromUrl(url: string): string {\n    const urlWitoutParams = url.split(/\\#|\\?/)[0];\n    const ext: string = (urlWitoutParams.substr((~-urlWitoutParams.lastIndexOf('.') >>> 0) + 1) || '').toLowerCase();\n\n    return (\n      EXTENSIONS.indexOf(ext) >= 0 ? ext : this.config.fallbackFileNameCachedExtension\n    );\n  }\n}\n","import { Component, ElementRef, EventEmitter, Input, OnInit, Output, Renderer2 } from '@angular/core';\nimport { ImageLoaderConfigService } from './services/image-loader-config.service';\nimport { ImageLoaderService } from './services/image-loader.service';\n\nconst propMap: any = {\n  display: 'display',\n  height: 'height',\n  width: 'width',\n  backgroundSize: 'background-size',\n  backgroundRepeat: 'background-repeat',\n};\n\nexport interface ImageAttribute {\n  element: string;\n  value: string;\n}\n\n@Component({\n  selector: 'img-loader',\n  template: `\n    <ion-spinner\n        *ngIf=\"spinner && isLoading && !fallbackAsPlaceholder\"\n        [name]=\"spinnerName\"\n        [color]=\"spinnerColor\"\n    ></ion-spinner>\n    <ng-content></ng-content>\n  `,\n  styles: [\n    'ion-spinner { float: none; margin-left: auto; margin-right: auto; display: block; }',\n  ],\n})\nexport class IonicImageLoaderComponent implements OnInit {\n  /**\n   * Fallback URL to load when the image url fails to load or does not exist.\n   */\n  @Input() fallbackUrl: string = this.config.fallbackUrl;\n  /**\n   * Whether to show a spinner while the image loads\n   */\n  @Input() spinner: boolean = this.config.spinnerEnabled;\n  /**\n   * Whether to show the fallback image instead of a spinner while the image loads\n   */\n\n  @Input() fallbackAsPlaceholder: boolean = this.config.fallbackAsPlaceholder;\n  /**\n   * Attributes to pass through to img tag if _useImg == true\n   */\n  @Input() imgAttributes: ImageAttribute[] = [];\n  /**\n   * Enable/Disable caching\n   */\n  @Input() cache = true;\n  /**\n   * Width of the image. This will be ignored if using useImg.\n   */\n  @Input() width: string = this.config.width;\n  /**\n   * Height of the image. This will be ignored if using useImg.\n   */\n  @Input() height: string = this.config.height;\n  /**\n   * Display type of the image. This will be ignored if using useImg.\n   */\n  @Input() display: string = this.config.display;\n  /**\n   * Background size. This will be ignored if using useImg.\n   */\n  @Input() backgroundSize: string = this.config.backgroundSize;\n  /**\n   * Background repeat. This will be ignored if using useImg.\n   */\n  @Input() backgroundRepeat: string = this.config.backgroundRepeat;\n  /**\n   * Name of the spinner\n   */\n  @Input() spinnerName: string = this.config.spinnerName;\n  /**\n   * Color of the spinner\n   */\n  @Input() spinnerColor: string = this.config.spinnerColor;\n  /**\n   * Notify on image load..\n   */\n  @Output()\n  load: EventEmitter<IonicImageLoaderComponent> = new EventEmitter<IonicImageLoaderComponent>();\n  /**\n   * Indicates if the image is still loading\n   */\n  isLoading = true;\n  element: HTMLElement;\n\n  constructor(\n    private _element: ElementRef,\n    private renderer: Renderer2,\n    private imageLoader: ImageLoaderService,\n    private config: ImageLoaderConfigService,\n  ) {\n  }\n\n  private _useImg: boolean = this.config.useImg;\n\n  /**\n   * Use <img> tag\n   */\n  @Input()\n  set useImg(val: boolean) {\n    this._useImg = val !== false;\n  }\n\n  /**\n   * Convenience attribute to disable caching\n   */\n  @Input()\n  set noCache(val: boolean) {\n    this.cache = val !== false;\n  }\n\n  private _src: string;\n\n  get src(): string {\n    return this._src;\n  }\n\n  /**\n   * The URL of the image to load.\n   */\n  @Input()\n  set src(imageUrl: string) {\n    this._src = this.processImageUrl(imageUrl);\n    this.updateImage(this._src);\n  }\n\n  ngOnInit(): void {\n    if (this.fallbackAsPlaceholder && this.fallbackUrl) {\n      this.setImage(this.fallbackUrl, false);\n    }\n\n    if (!this.src) {\n      // image url was not passed\n      // this can happen when [src] is set to a variable that turned out to be undefined\n      // one example could be a list of users with their profile pictures\n      // in this case, it would be useful to use the fallback image instead\n      // if fallbackUrl was used as placeholder we do not need to set it again\n      if (!this.fallbackAsPlaceholder && this.fallbackUrl) {\n        // we're not going to cache the fallback image since it should be locally saved\n        this.setImage(this.fallbackUrl);\n      } else {\n        this.isLoading = false;\n      }\n    }\n  }\n\n  private updateImage(imageUrl: string) {\n    this.imageLoader\n      .getImagePath(imageUrl)\n      .then((url: string) => this.setImage(url))\n      .catch((error: any) => this.setImage(this.fallbackUrl || imageUrl));\n  }\n\n  /**\n   * Gets the image URL to be loaded and disables caching if necessary\n   */\n  private processImageUrl(imageUrl: string): string {\n    if (this.cache === false) {\n      // need to disable caching\n\n      if (imageUrl.indexOf('?') < 0) {\n        // add ? if doesn't exists\n        imageUrl += '?';\n      } else {\n        imageUrl += '&';\n      }\n      // append timestamp at the end to make URL unique\n      imageUrl += 'cache_buster=' + Date.now();\n    }\n\n    return imageUrl;\n  }\n\n  /**\n   * Set the image to be displayed\n   * @param imageUrl image src\n   * @param stopLoading set to true to mark the image as loaded\n   */\n  private setImage(imageUrl: string, stopLoading: boolean = true): void {\n    this.isLoading = !stopLoading;\n\n    if (this._useImg) {\n      // Using <img> tag\n      if (!this.element) {\n        // create img element if we dont have one\n        this.element = this.renderer.createElement('img');\n        this.renderer.appendChild(this._element.nativeElement, this.element);\n      }\n\n      // set it's src\n      this.renderer.setAttribute(this.element, 'src', imageUrl);\n\n      // if imgAttributes are defined, add them to our img element\n      this.imgAttributes.forEach((attribute) => {\n        this.renderer.setAttribute(this.element, attribute.element, attribute.value);\n      });\n      if (this.fallbackUrl && !this.imageLoader.nativeAvailable) {\n        this.renderer.listen(this.element, 'error', () =>\n          this.renderer.setAttribute(this.element, 'src', this.fallbackUrl),\n        );\n      }\n    } else {\n      // Not using <img> tag\n\n      this.element = this._element.nativeElement;\n\n      for (const prop in propMap) {\n        if (this[prop]) {\n          this.renderer.setStyle(this.element, propMap[prop], this[prop]);\n        }\n      }\n      this.renderer.setStyle(\n        this.element,\n        'background-image',\n        `url(\"${imageUrl || this.fallbackUrl}\")`,\n      );\n    }\n    if (stopLoading) {\n      this.load.emit(this);\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { File } from '@ionic-native/file/ngx';\nimport { IonicModule } from '@ionic/angular';\nimport { IonicImageLoaderComponent } from './ionic-image-loader.component';\n\nimport { ImageLoaderConfigService } from './services/image-loader-config.service';\nimport { ImageLoaderService } from './services/image-loader.service';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    HttpClientModule,\n    CommonModule,\n  ],\n  declarations: [IonicImageLoaderComponent],\n  exports: [IonicImageLoaderComponent],\n})\nexport class IonicImageLoader {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: IonicImageLoader,\n      providers: [\n        ImageLoaderConfigService,\n        ImageLoaderService,\n        File,\n      ],\n    };\n  }\n}\n"],"names":["Injectable","Subject","fromEvent","first","File","take","filter","HttpClient","Platform","WebView","EventEmitter","Component","ElementRef","Renderer2","Input","Output","NgModule","IonicModule","HttpClientModule","CommonModule"],"mappings":"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"}
