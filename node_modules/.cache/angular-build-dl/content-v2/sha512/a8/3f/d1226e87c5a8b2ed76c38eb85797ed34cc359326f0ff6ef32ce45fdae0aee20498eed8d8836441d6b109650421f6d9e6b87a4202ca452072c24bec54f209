{"version":3,"sources":["webpack:///src/app/shopPage/orderPage/orderPage.html","webpack:///src/app/shopPage/productPage/productPage.html","webpack:///src/app/shopPage/shopPage.html","webpack:///src/app/shopPage/orderPage/orderPage.scss","webpack:///src/app/shopPage/orderPage/orderPage.ts","webpack:///src/app/shopPage/productPage/productPage.scss","webpack:///src/app/shopPage/productPage/productPage.ts","webpack:///src/app/shopPage/shopPage.module.ts","webpack:///src/app/shopPage/shopPage.scss","webpack:///src/app/shopPage/shopPage.ts"],"names":["OrderPage","service","sanitizer","GlobalFields","secureUrl","getSecurePageURL","setWhiteBlackBackgroundStatusBar","selectedProduct","url","selectedOrderUrl","undefined","includes","replace","bypassSecurityTrustResourceUrl","profile","cookie","selector","template","ProductPage","router","inAppBrowser","products","navigateByUrl","permalink","browser","create","ShopPageModule","imports","forChild","path","component","declarations","ShopPage","wooCommerceService","translate","categories","loading","lastNumber","page","showFilters","loadFirstTimeProducts","loadCategories","getAllProductCategories","subscribe","res","length","concat","loadMoreProducts","categoriesSelected","forEach","cat","selected","push","id","getAllProducts"],"mappings":"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","file":"shopPage-shopPage-module-es5.js","sourcesContent":["export default \"<ion-header translucent=\\\"true\\\" dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n  <ion-toolbar dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"tabs/shop\\\" (click)=\\\"GlobalFields.selectedProduct = undefined\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Checkout</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n\\n\\n  <iframe [src]='secureUrl'\\n          #iframe\\n          webkitallowfullscreen mozallowfullscreen allowfullscreen\\n          sandbox=\\\"allow-scripts allow-top-navigation allow-pointer-lock allow-forms allow-same-origin allow-popups\\\"\\n          style=\\\"width: 100%; height: 100%; border: none\\\">\\n  </iframe>\\n\\n</ion-content>\\n\";","export default \"<ion-header translucent=\\\"true\\\" dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n  <ion-toolbar dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"tabs/shop\\\" (click)=\\\"GlobalFields.selectedProduct = undefined\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title *ngIf=\\\"GlobalFields.selectedProduct\\\">{{GlobalFields.selectedProduct.name}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [ngStyle]=\\\"GlobalFields.getBodyColorBackgroundJson()\\\" dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n\\n  <div *ngIf=\\\"GlobalFields.selectedProduct\\\" style=\\\"margin: 10px\\\">\\n    <ion-slides *ngIf=\\\"GlobalFields.selectedProduct.images && GlobalFields.selectedProduct.images.length>0\\\">\\n      <ion-slide *ngFor=\\\"let img of GlobalFields.selectedProduct.images\\\" style=\\\"background-color: whitesmoke;\\\">\\n      <div style=\\\"text-align: center; background-color: whitesmoke;\\\">\\n        <img src=\\\"{{img.src}}\\\" style=\\\"height: 150px; width: auto\\\"/>\\n      </div>\\n      </ion-slide>\\n    </ion-slides>\\n    <ion-card-header>\\n      <ion-card-subtitle [innerHTML]=\\\"GlobalFields.selectedProduct.price_html\\\"></ion-card-subtitle>\\n      <ion-card-title style=\\\"font-size: 12pt\\\">\\n        {{GlobalFields.selectedProduct.name}}\\n      </ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      <div [innerHTML]=\\\"GlobalFields.selectedProduct.short_description\\\"></div>\\n\\n      <br><br>\\n      <div style=\\\"text-align: center\\\">\\n        <button style=\\\"margin-bottom: 10px; padding: 10px; border-radius: 50px; box-shadow: 0 2px 8px rgba(0,0,0,.15)!important; background-color: white;\\\" (click)=\\\"goToOrder()\\\">\\n          <i class=\\\"fas fa-shopping-cart\\\"></i> {{'BUY_NOW' | translate}}\\n        </button>\\n      </div>\\n\\n\\n    </ion-card-content>\\n  </div>\\n\\n</ion-content>\\n\";","export default \"<ion-header translucent=\\\"true\\\" mode=\\\"{{GlobalFields.mode}}\\\" dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n  <ion-toolbar>\\n    <!-- If Side menu is used-->\\n    <ion-buttons *ngIf=\\\"GlobalFields.site_details.navigationType==2\\\" slot=\\\"start\\\">\\n      <ion-menu-button style=\\\"color: #3b3c3c\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>{{'SHOP' | translate}}</ion-title>\\n    <ion-buttons slot=\\\"end\\\" style=\\\"position: absolute; right: 5px\\\">\\n      <button *ngIf=\\\"!showFilters\\\" class=\\\"btn-search-header\\\" (click)=\\\"showFilters=!showFilters\\\" dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\"><i class=\\\"fas fa-search\\\"></i></button>\\n      <button *ngIf=\\\"showFilters\\\" class=\\\"btn-search-header\\\" style=\\\"color: red; padding: 8px 10px\\\" (click)=\\\"showFilters=!showFilters\\\" dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\"><i class=\\\"fas fa-times\\\"></i></button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [ngStyle]=\\\"GlobalFields.getBodyColorBackgroundJson()\\\" dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n\\n  <ion-header *ngIf=\\\"!showFilters\\\" collapse=\\\"condense\\\" dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n    <ion-toolbar style=\\\"padding: 15px\\\">\\n      <ion-title size=\\\"large\\\">{{'SHOP' | translate}}</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n  <div class=\\\"filtersBox\\\" *ngIf=\\\"showFilters\\\"  dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n    <ion-row  dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n      <ion-col size=\\\"4\\\"><b>{{'CATEGORIES' | translate}}:</b></ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <span *ngFor=\\\"let cat of categories\\\">\\n          <input type=\\\"checkbox\\\" id=\\\"{{'cat' + cat.id}}\\\" name=\\\"{{'cat' + cat.id}}\\\" [(ngModel)]=\\\"cat.selected\\\">\\n          <label for=\\\"{{'cat' + cat.id}}\\\" style=\\\"padding-left: 10px;\\\">{{cat.name}}</label><br>\\n        </span>\\n      </ion-col>\\n    </ion-row>\\n    <div style=\\\"text-align: right\\\"  dir=\\\"{{GlobalFields.getLanguageLayout()}}\\\">\\n      <button class=\\\"btn-search-header\\\" style=\\\"position: relative\\\" [ngStyle]=\\\"GlobalFields.getPrimaryColorJson()\\\" (click)=\\\"loadFirstTimeProducts(); showFilters=false\\\">\\n        <ion-icon name=\\\"search\\\"></ion-icon> {{'SHOW_RESULTS' | translate}}\\n      </button>\\n    </div>\\n  </div>\\n\\n\\n  <div *ngIf=\\\"!loading && products && products.length==0\\\">\\n    No products\\n  </div>\\n\\n  <span *ngFor=\\\"let prod of products\\\" >\\n   <productList [product]=\\\"prod\\\"></productList>\\n  </span>\\n\\n  <!-- Paging -->\\n  <div *ngIf=\\\"!loading && products && lastNumber>19\\\" style=\\\"width: 100%; text-align: center; margin-top: 10px; margin-bottom: 20px;\\\" (click)=\\\"loadMoreProducts()\\\">\\n    <ion-icon name=\\\"refresh\\\"></ion-icon> {{'LOAD_MORE' | translate}}\\n  </div>\\n\\n  <!-- Loading -->\\n  <div *ngIf=\\\"loading\\\">\\n    <ion-list style=\\\"padding: 15px\\\">\\n      <div *ngFor=\\\"let items of [1,2,3]\\\">\\n        <ion-thumbnail style=\\\"width: 100%; height: 200px;\\\">\\n          <ion-skeleton-text animated></ion-skeleton-text>\\n        </ion-thumbnail>\\n        <ion-label>\\n          <h3><ion-skeleton-text animated style=\\\"width: 50%\\\"></ion-skeleton-text></h3>\\n          <p><ion-skeleton-text animated style=\\\"width: 80%\\\"></ion-skeleton-text></p>\\n          <p><ion-skeleton-text animated style=\\\"width: 60%\\\"></ion-skeleton-text></p>\\n        </ion-label>\\n        <br>\\n      </div>\\n    </ion-list>\\n  </div>\\n\\n\\n\\n</ion-content>\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Nob3BQYWdlL29yZGVyUGFnZS9vcmRlclBhZ2Uuc2NzcyJ9 */\";","import {Component} from '@angular/core';\nimport {Service} from '../../services/Service';\nimport {GlobalFields} from '../../GlobalFields';\nimport {DomSanitizer} from '@angular/platform-browser';\n\n@Component({\n  selector: 'page-order',\n  templateUrl: 'orderPage.html',\n  styleUrls: ['orderPage.scss']\n})\nexport class OrderPage {\n\n  GlobalFields = GlobalFields;\n\n  secureUrl;\n\n\n  constructor(private service: Service, private sanitizer:DomSanitizer) {\n    this.secureUrl = this.getSecurePageURL();\n  }\n\n\n  ionViewDidEnter() {\n    this.service.setWhiteBlackBackgroundStatusBar();\n    this.GlobalFields.selectedProduct\n  }\n\n\n  getSecurePageURL() {\n    let url = this.GlobalFields.selectedOrderUrl;\n    this.GlobalFields.selectedOrderUrl = undefined;\n\n    if (!url.includes(\"https\")){\n      url.replace(\"http\", \"https\")\n    }\n\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url + '?cookie=' + GlobalFields.profile.cookie);\n  }\n\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Nob3BQYWdlL3Byb2R1Y3RQYWdlL3Byb2R1Y3RQYWdlLnNjc3MifQ== */\";","import {Component} from '@angular/core';\nimport {Service} from '../../services/Service';\nimport {GlobalFields} from '../../GlobalFields';\nimport {WooCommerceService} from '../../services/WooCommerceService';\nimport {Product} from '../../entities/Product';\nimport {Router} from '@angular/router';\nimport {InAppBrowser} from '@ionic-native/in-app-browser/ngx';\n\n\n@Component({\n  selector: 'page-product',\n  templateUrl: 'productPage.html',\n  styleUrls: ['productPage.scss']\n})\nexport class ProductPage {\n\n  GlobalFields = GlobalFields;\n\n  products:Product[] = [];\n\n  constructor(private service: Service,private router: Router,\n              public inAppBrowser: InAppBrowser) {\n  }\n\n\n  ionViewDidEnter() {\n   if(!GlobalFields.selectedProduct)\n     this.router.navigateByUrl('/tabs/shop');\n    this.service.setWhiteBlackBackgroundStatusBar();\n  }\n\n  goToOrder(){\n   // this.router.navigate(['tabs/shop/order'])\n    let url = GlobalFields.selectedProduct.permalink;\n    if(GlobalFields.profile)\n      url =  url + '?cla_cookie=' + GlobalFields.profile.cookie;\n    const browser = this.inAppBrowser.create(url, '_blank');\n\n  }\n\n\n}\n","import { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport {NgModule} from \"@angular/core\";\nimport {ShopPage} from './shopPage';\nimport {OrderPage} from './orderPage/orderPage';\nimport {ProductPage} from './productPage/productPage';\nimport {AppModule} from '../app.module';\nimport {SharedModule} from '../shared.module';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        RouterModule.forChild([\n            {\n                path: '',\n                component: ShopPage\n            }, {\n                path: 'product',\n                component: ProductPage\n            }, {\n                path: 'order',\n                component: OrderPage\n            }\n        ]),\n      SharedModule\n    ],\n    declarations: [ShopPage,OrderPage,ProductPage]\n})\nexport class ShopPageModule {}\n","export default \".filtersBox {\\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.09);\\n  padding: 10px;\\n  margin: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9lbW1hbnVlbGtldGNoYWJlcGEvRGVza3RvcC9jdXN0b21saXN0aW5nYXBwX3YxXzZfMi9hcHAvc3JjL2FwcC9zaG9wUGFnZS9zaG9wUGFnZS5zY3NzIiwic3JjL2FwcC9zaG9wUGFnZS9zaG9wUGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUNBQUE7RUFDQSxhQUFBO0VBQ0EsWUFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvc2hvcFBhZ2Uvc2hvcFBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5maWx0ZXJzQm94e1xuICBib3gtc2hhZG93OiAwIDFweCA4cHggcmdiKDAgMCAwIC8gOSUpO1xuICBwYWRkaW5nOiAxMHB4O1xuICBtYXJnaW46IDEwcHg7XG59XG4iLCIuZmlsdGVyc0JveCB7XG4gIGJveC1zaGFkb3c6IDAgMXB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMDkpO1xuICBwYWRkaW5nOiAxMHB4O1xuICBtYXJnaW46IDEwcHg7XG59Il19 */\";","import {Component} from '@angular/core';\nimport {Service} from '../services/Service';\nimport {GlobalFields} from '../GlobalFields';\nimport {WooCommerceService} from '../services/WooCommerceService';\nimport {Product} from '../entities/Product';\nimport {TranslateService} from '@ngx-translate/core';\nimport {ListingCategory} from '../entities/listingCategory';\nimport {Listing} from '../entities/listing';\n\n\n@Component({\n  selector: 'page-shop',\n  templateUrl: 'shopPage.html',\n  styleUrls: ['shopPage.scss']\n})\nexport class ShopPage {\n\n  GlobalFields = GlobalFields;\n\n  products: Product[] = [];\n  categories: {\n    count?: number; //how many products has\n    description?: string;\n    id?: number;\n    name?: string;\n    slug?: string;\n    selected?: boolean;\n  }[] = [];\n\n  loading = true;\n  lastNumber = 20;\n  page = 1;\n\n  showFilters = false;\n\n  constructor(private service: Service, private wooCommerceService: WooCommerceService, public translate: TranslateService) {\n    this.loadFirstTimeProducts();\n    this.loadCategories();\n  }\n\n\n  ionViewDidEnter() {\n    this.service.setWhiteBlackBackgroundStatusBar();\n  }\n\n\n  loadCategories(){\n    this.wooCommerceService.getAllProductCategories(0).subscribe((res: any[]) => {\n      if (res && res.length > 0)\n        this.categories = this.categories.concat(res);\n    });\n  }\n\n\n  loadFirstTimeProducts(){\n    this.page = 0;\n    this.products = []\n    this.loadMoreProducts();\n  }\n\n  loadMoreProducts() {\n    this.loading = true;\n    //User can add listings, so show packages\n    /*if (GlobalFields.isLoggedIn && GlobalFields.userRole.can_add_listings) {\n      this.wooCommerceService.getPromotionPackages(this.page).subscribe((res: Product[]) => {\n        if (res && res.length > 0) {\n          this.products = this.products.concat(res);\n          this.lastNumber = res.length;\n          this.page = this.page + 1;\n        } else\n          this.lastNumber = 0;\n        this.loading = false;\n      });\n    }*/\n    //User CANNOT add listings, show all products\n  //  else {\n\n\n\n    const categoriesSelected = [];\n    if(this.categories && this.categories.length>0)\n      this.categories.forEach(cat =>{\n        if (cat.selected)\n          categoriesSelected.push(cat.id)\n      })\n\n    this.wooCommerceService.getAllProducts(this.page,categoriesSelected).subscribe((res: Product[]) => {\n      if (res && res.length > 0) {\n        this.products = this.products.concat(res);\n        this.lastNumber = res.length;\n        this.page = this.page + 1;\n      } else\n        this.lastNumber = 0;\n      this.loading = false;\n    });\n\n      // }\n  }\n\n\n}\n"]}